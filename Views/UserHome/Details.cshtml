@model Tasken2.Models.Property

@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
    <link rel="stylesheet" type="text/css" href="~/css/Details.css" />


    <style>
        body {
            background-color: rgba(0, 0, 0, 0.4);
            color: white;
            font-family: Arial, sans-serif;
        }

        .container {
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            margin-top: 50px;
        }

        .form-label {
            color: #ffffff;
        }

        .form-control, .form-select {
            background-color: #333;
            color: white;
            border: 1px solid #555;
        }

            .form-control::placeholder, .form-select::placeholder {
                color: #aaa;
            }

            .form-control:focus, .form-select:focus {
                border-color: #87CEEB;
                box-shadow: 0 0 5px rgba(135, 206, 235, 0.5);
            }

        .btn-primary {
            background-color: #444;
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 8px;
        }

        /* .btn-primary:hover {
                        background-color: #87CEEB;
                    } */

        .text-danger {
            color: #ff6b6b;
        }

        fieldset {
            width: 60%;
            margin: auto;
            border: none;
        }

        /* legend {
                    color: #87CEEB;
                    font-size: 1.5em;
                } */

        /* .editor-label {
                    margin-top: 10px;
                    color: #87CEEB;
                    font-weight: bold;
                } */

        .editor-field {
            margin-bottom: 10px;
        }

        input[type="file"] {
            margin-bottom: 10px;
        }

        h2 {
            margin-bottom: 20px;
            color: #87CEEB;
        }
    </style>
</head>

<h1>Property Details</h1>

<div class="container">
    <div class="row">
        <!-- Property Details -->
        <div class="col-md-6">
            <h4>Property Information</h4>
            <hr />
            <dl class="row">
                <dt class="col-sm-4">Price </dt>
                <dd class="col-sm-8">@Html.DisplayFor(model => model.propPrice) &pound;</dd>

                <dt class="col-sm-4">Area</dt>
                <dd class="col-sm-8">@Html.DisplayFor(model => model.propArea) M<sup>2 </sup></dd>

                <dt class="col-sm-4">Number of rooms </dt>
                <dd class="col-sm-8">@Html.DisplayFor(model => model.probNumberOfRooms)</dd>

                <dt class="col-sm-4">Address</dt>
                <dd class="col-sm-8">  @Html.DisplayFor(model => model.propRegion) , @Html.DisplayFor(model => model.propStreet)</dd>

                <dt class="col-sm-4">Floor</dt>
                <dd class="col-sm-8">@Html.DisplayFor(model => model.propFloorNumber)</dd>

                <dt class="col-sm-4">Created At</dt>
                <dd class="col-sm-8">@Html.DisplayFor(model => model.CreatedAt)</dd>

                <dt class="col-sm-4">Owner</dt>
                <dd class="col-sm-8">@Html.DisplayFor(model => model.CreatedBy.firstName) @Html.DisplayFor(model => model.CreatedBy.lastName)</dd>

                <dt class="col-sm-4">Phone number</dt>
                <dd class="col-sm-8">@Html.DisplayFor(model => model.CreatedBy.phoneNumber)</dd>
            </dl>
        </div>

        <!-- Property Images -->
        <div class="col-md-6">
            <h4>Property Images</h4>
            <hr />
            <div id="propertyCarousel" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    @if (!string.IsNullOrEmpty(Model.propImage1))
                    {
                        <div class="carousel-item active">
                            <img src="@Model.propImage1" class="d-block w-100" alt="Property Image 1">
                        </div>
                    }
                    @if (!string.IsNullOrEmpty(Model.propImage2))
                    {
                        <div class="carousel-item">
                            <img src="@Model.propImage2" class="d-block w-100" alt="Property Image 2">
                        </div>
                    }
                    @if (!string.IsNullOrEmpty(Model.propImage3))
                    {
                        <div class="carousel-item">
                            <img src="@Model.propImage3" class="d-block w-100" alt="Property Image 3">
                        </div>
                    }
                    @if (!string.IsNullOrEmpty(Model.propImage4))
                    {
                        <div class="carousel-item">
                            <img src="@Model.propImage4" class="d-block w-100" alt="Property Image 4">
                        </div>
                    }
                    @if (!string.IsNullOrEmpty(Model.propImage5))
                    {
                        <div class="carousel-item">
                            <img src="@Model.propImage5" class="d-block w-100" alt="Property Image 5">
                        </div>
                    }
                </div>
                <a class="carousel-control-prev" href="#propertyCarousel" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#propertyCarousel" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>

    <div class="comments">
        
        <h3>Comments</h3>
        <form asp-action="AddComment" method="post">
            <input type="hidden" name="propertyId" value="@Model.propertyID" />
            <div class="form-group">
                <label for="commentText">Add Comment:</label>
                <textarea name="commentText" class="form-control" rows="3"></textarea>
            </div>
            <div class="form-group">
                <br />
                <input type="submit" value="Add Comment" class="btn btn-primary" />
            </div>
        </form>

        
        <div>
            @foreach (var comment in Model.comments)
            {
                <div class="comment">
                    <div class="comment-header">
                        <span class="comment-author">@comment.Person.firstName @comment.Person.lastName</span>
                        <span class="comment-time">@comment.commentTime.ToString("g")</span>
                    </div>
                    <div class="comment-body">
                        <p>@comment.commentText</p>
                    </div>
                </div>
            }
        </div>
    </div>

    <br />
    <br />
     <div class="ratings">
        <h3>Ratings</h3>
        <div>
            @foreach (var rating in Model.PropertyRatings)
            {
                <div class="rating">
                    <div class="rating-header">
                        <span class="rating-author">@rating.Person.firstName @rating.Person.lastName</span>
                        <span class="rating-time">@rating.CreatedAt.ToString("g")</span>
                    </div>
                    <div class="rating-body">
                        <p>Rating: @rating.Rating</p>
                    </div>
                </div>
            }
        </div>
        
        <form asp-action="AddRating" method="post">
            <input type="hidden" name="propertyId" value="@Model.propertyID" />
            <div class="form-group">
                <br />
                <label for="rating">Add Rating:</label>
                <input type="number" name="rating" class="form-control" min="0" max="5" step="0.1" />
            </div>
            <div class="form-group">
                <br />
                <input type="submit" value="Add Rating" class="btn btn-primary" />
            </div>
        </form>
    </div> 

    <div>
        <br />
        <a asp-action="Index" class="btn btn-secondary">Home</a>
    </div>
</div>

@section Scripts {
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
}
